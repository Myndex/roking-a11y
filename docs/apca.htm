<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8">
		<title>Roking-A11y APCA Evaluator</title>
		<style type="text/css">
			body {
				margin: auto;
				user-select: none;
				width: 80%;
			}
			button {
				border-radius: 0.25rem;
				font-size: 1.5rem;
				margin: 0.2rem
			}
			button:not([disabled]) {
				background-color: hsl(204, 100%, 60%);
				border: 0.0625em solid hsl(204, 100%, 30%);
				color: hsl(204, 100%, 5%);
			}
			h1 ~ div {
				display: flex;
			}
			h1 ~ div > :not(:last-child) {
				margin-right: 2em;
			}
			input[type="text"] {
				background-color: transparent;
				background-position: center;
				background-size: contain;
				border: 1px solid hsl(204, 100%, 40%);
				border-radius: 0.25em;
				font-family: monospace;
				font-size: 1.1rem;
				text-align: center;
				width: 8em;
			}
			input[aria-invalid="true"] {
				border-color: #e00;
			}
			input, label {
				display: block;
				width: 100%;
			}
			tbody td[id^="results"] {
				font-family: monospace;
				min-width: 6em;
				text-align: right;
			}
			tfoot th, tfoot td {
				text-align: right;
			}
			#fonts td:first-of-type {
				text-align: right;
			}
			#fonts td:not(:first-of-type) {
				text-align: center;
			}
		</style>
	</head>
	<body>
		<main>
			<h1>Roking-A11y APCA Evaluator</h1>
			<p>
				Because of the way color is <em>perceived</em>, light text on a dark background is
				perceived differently than dark text on a light background. This means how the <em>Luminance 
				Contrast</em> is calculated should account for the polarity.
			</p>
			<p>
				In the results table, generated by clicking the <em>Calculate</em> button, columns show the
				minimum contrast for various font sizes at the weights specified, from 100 to 900.
				If the contrast is greater than or equal to the minimum contrast value for a particular font
				size, the font weight for that entry will be <em>bold</em>. For example, at 12 pixels, the
				lowest possible weight for which there can be an accessible weight is 400, and a 12 pixel font
				with a weight of 900 must have an APCA contrast of at least 80 percent.
			</p>
			<div>
				<table style="align-self: flex-start;">
					<thead>
						<tr>
							<th id="background-label">Background</th>
							<th id="foreground-label">Foreground</th>
							<th>Result</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<input aria-labelledBy="r1 background-label" id="background" type="text" value="#fff"/>
							</td>
							<td>
								<input aria-labelledBy="r1 foreground-label" id="foreground" type="text" value="#000"/>
							</td>
							<td id="results"></td>
						</tr>
					</tbody>
					<tfoot>
						<tr>
							<td colspan="4">
								<button type="button" onclick="onClick()">Calculate</button>
							</td>
					</tfoot>
				</table>
				<div id="fonts"></div>
			</div>
		</main>
		
		<script src="apca.min.js"></script>
		<script>
			function onClick() {
				const bgn = document.getElementById('background').value;
				const txn = document.getElementById('foreground').value;

				const apca = new APCA({background: bgn, foreground: txn});

				document.getElementById('results').innerHTML = apca.score();
				document.getElementById('fonts').innerHTML = '';
				document.getElementById('fonts').appendChild(apca.Fonts.toHtml());
			}
			function onKeyPress(evt) {
				if (evt.key === 'Enter') {
					onClick();
				}
			}
			
			document.getElementById('background').addEventListener('keypress', onKeyPress);
			document.getElementById('foreground').addEventListener('keypress', onKeyPress);
			
			onClick();
		</script>
	</body>
</html>
