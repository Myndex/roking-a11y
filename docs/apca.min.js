function Color(e){function t(e){return x.hex.map(function(t){var n=t.exec(""+e.trim());if(n)return{red:Math.min(255,Math.max(0,a((n[1]+n[1]).substr(-2)))),green:Math.min(255,Math.max(0,a((n[2]+n[2]).substr(-2)))),blue:Math.min(255,Math.max(0,a((n[3]+n[3]).substr(-2)))),opacity:n[4]?Math.min(1,Math.max(0,a((n[4]+n[4]).substr(-2))/255)):1}}).reduce(function(e,t){return e||t})}function n(e){var t,n,r,i,u;return 0===e.saturation?{red:255*e.lightness,green:255*e.lightness,blue:255*e.lightness,opacity:e.opacity}:"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness?(t=(1-Math.abs(2*e.lightness-1))*p,n=e.hue/60,r=t*(1-Math.abs(n%2-1)),i=e.lightness-t/2,u=[[t,r,0],[r,t,0],[0,t,r],[0,r,t],[r,0,t],[t,0,r]][Math.floor(n)%6],{red:Math.round(255*(u[0]+i)),green:Math.round(255*(u[1]+i)),blue:Math.round(255*(u[2]+i)),opacity:e.opacity}):void 0}function r(e){var t,n,r,i,u,a,l,h=60;if(o(e.red)&&o(e.green)&&o(e.blue))return t=s(e.red/255),n=s(e.green/255),r=s(e.blue/255),a=((i=Math.max(t,n,r))+(u=Math.min(t,n,r)))/2,l=i===u?0:a<.5?(i-u)/(i+u):(i-u)/(2-i-u),h*=t===i?(n-r)/(i-u):n===i?2+(r-t)/(i-u):4+(t-n)/(i-u),h+=h<0?360:0,{hue:Math.round(h),saturation:Math.round(100*l)/100,lightness:Math.round(100*a)/100,opacity:e.opacity}}function i(e){return e&&o(e.hue)&&o(e.saturation)&&o(e.lightness)}function u(e){return e&&o(e.red)&&o(e.green)&&o(e.blue)}function o(e){return!Number.isNaN(e)&&void 0!==e}function a(e){return parseInt(e,16)}function s(e){return Number(e.toFixed(2))}function l(e){if("string"==typeof e||"number"==typeof e)return/%$/.test(e)?parseFloat(e.replace(/%$/,""))/100:/^[0a-f]+$/i.test(e)?parseInt(e,16):parseFloat(e)}Object.defineProperty(this,"blue",{enumerable:!0,get:function(){return c},set:function(e){c="string"==typeof e&&/[a-f]/i.test(e)?l(e):Number(e);var t=r({red:h,green:f,blue:c});t&&(b=t.hue,p=t.saturation,d=t.lightness)},writeable:!0}),Object.defineProperty(this,"canDarken",{enumerable:!0,get:function(){return this.luminance>0}}),Object.defineProperty(this,"canLighten",{enumerable:!0,get:function(){return this.luminance<100}}),Object.defineProperty(this,"green",{enumerable:!0,get:function(){return f},set:function(e){f="string"==typeof e&&/[a-f]/i.test(e)?l(e):Number(e);var t=r({red:h,green:f,blue:c});t&&(b=t.hue,p=t.saturation,d=t.lightness)},writeable:!0}),Object.defineProperty(this,"hcolor",{enumerable:!0,get:function(){function e(e){return`0${e.toString(16)}`.substr(-2)}if(o(this.red)&&o(this.green)&&o(this.blue))return this.opacity<1?`#${e(this.red)}${e(this.green)}${e(this.blue)}${e(Math.floor(255*this.opacity))}`:`#${e(this.red)}${e(this.green)}${e(this.blue)}`},set:function(e){var n=t(e),i=r(n);o(n.red)&&o(n.green)&&o(n.blue)&&(h=n.red,f=n.green,c=n.blue,g=n.opacity);o(i.hue)&&o(i.saturation)&&o(i.lightness)&&(b=i.hue,p=i.saturation,d=i.lightness)},writeable:!0}),Object.defineProperty(this,"hue",{enumerable:!0,get:function(){return b},set:function(e){b=Number(e),b+=b<360?360:0;var t=n({hue:b%=360,saturation:p,lightness:d,opacity:g});t&&(h=t.red,f=t.green,c=t.blue)},writeable:!0}),Object.defineProperty(this,"lightness",{enumerable:!0,get:function(){if("number"==typeof d)return`${Math.round(100*d)}%`},set:function(e){d="string"==typeof e?l(e):Number(e);var t=n({hue:b,saturation:p,lightness:d,opacity:g});t&&(h=t.red,f=t.green,c=t.blue)},writeable:!0}),Object.defineProperty(this,"luminance",{enumerable:!0,get:function(){function e(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}if(o(h)&&o(f)&&o(c))return 100*(.2126*e(h)+.7152*e(f)+.0722*e(c))}}),Object.defineProperty(this,"opacity",{enumerable:!0,get:function(){return"number"!=typeof g?1:s(g)},set:function(e){var t;t="string"==typeof e&&/%/.test(e)?Number(e.replace(/%/g,""))/100:"string"==typeof e&&/^0|[a-f]/i.test(e)?parseInt(e,16)/255:Number(e);Number.isNaN(t)||(g=s(Math.floor(t)>0?t/100:t))},writeable:!0}),Object.defineProperty(this,"red",{enumerable:!0,get:function(){return h},set:function(e){h="string"==typeof e&&/[a-f]/i.test(e)?l(e):Number(e);var t=r({red:h,green:f,blue:c});t&&(b=t.hue,p=t.saturation,d=t.lightness)},writeable:!0}),Object.defineProperty(this,"saturation",{enumerable:!0,get:function(){if("number"==typeof p)return`${Math.round(100*p)}%`},set:function(e){p="string"==typeof e?l(e):Number(e);var t=n({hue:b,saturation:p,lightness:d,opacity:g});t&&(h=t.red,f=t.green,c=t.blue)},writeable:!0}),this.darken=function(e){var n=this.toString()||"#000000",r=parseInt(n.replace(/^#/,""),16),i=Math.max(0,(r>>16)-(e||1)),u=(Math.max(0,(255&r)-(e||1))|Math.max(0,(r>>8&255)-(e||1))<<8|i<<16).toString(16),o=t(`000000${u}`.substr(-6)),a=convertRgbTohsl(o);return o&&(h=o.red,f=o.green,c=o.blue),a&&(u=a.hue,p=a.saturation,d=a.lightness),this},this.lighten=function(e){var n=this.toString()||"#ffffff",i=parseInt(n.replace(/^#/,""),16),u=Math.min((i>>16)+(e||1),255),o=(Math.min((255&i)+(e||1),255)|Math.min((i>>8&255)+(e||1),255)<<8|u<<16).toString(16),a=t(`000000${o}`.substr(-6)),s=r(a);return a&&(h=a.red,f=a.green,c=a.blue),s&&(o=s.hue,p=s.saturation,d=s.lightness),this},this.isColorType=function(e){return!!e&&("string"==typeof(t=e)&&x.hex.map(function(e){return e.test(t)}).filter(function(e){return e}).length>0||i(e)||u(e));var t},this.toString=function(){return this.hcolor};var h,f,c,b,p,d,g,m,y,v,M,x={hex:[/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,/^#([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})?$/i]};v=u(y=m=e)?y:i(y)?n(y):t(y),M=r(v),v&&(h=v.red,f=v.green,c=v.blue),M&&(b=parseInt(M.hue,10),b+=b<0?360:0,p=l(M.saturation),d=l(M.lightness)),g=v.opacity||l(m.opacity)}function APCA(e,t){var n,r;function i(e){var t=new Color(e);n=t.isColorType(e)?t:n}function u(e){var t=new Color(e);r=t.isColorType(e)?t:r}var o={threshold:.01,exponent:1.5},a={"12px":[null,null,null,100,94,87,80,80,80],"14px":[null,null,null,90,84,77,70,70,70],"16px":[null,null,110,80,77,72,60,60,60],"18px":[null,null,100,78,74,70,59,59,59],"20px":[null,120,94,76,72,67,58,58,58],"22px":[null,110,87,75,70,65,57,57,57],"24px":[null,100,80,74,66,60,56,56,56],"26px":[null,96,78,72,65,59,55,55,55],"28px":[null,92,76,70,64,58,54,54,52],"30px":[null,88,74,68,62,57,53,52,50],"32px":[null,84,72,66,60,56,52,50,48],"36px":[120,80,70,64,58,54,50,48,46],"40px":[114,77,68,62,57,52,48,46,44],"44px":[108,74,66,60,55,50,46,44,42],"48px":[100,70,65,58,53,48,44,42,40],"56px":[95,67,64,56,51,46,42,40,40],"64px":[90,65,62,54,49,44,40,40,40],"72px":[85,63,60,52,47,42,40,40,40],"96px":[80,60,55,50,45,40,40,40,40]};Object.defineProperty(a,"list",{enumerable:!1,value:function(){return Object.keys(this)}}),Object.defineProperty(a,"toHtml",{enumerable:!1,value:function(){var e=document.createElement("table"),t=document.createElement("thead"),n=document.createElement("tbody"),r=Object.keys(this).reduce((e,t)=>Math.max(e,this[t].length),0),i=t.insertRow(),u=i.appendChild(document.createElement("th")),o=100,a=f();e.appendChild(t),e.appendChild(n),u.innerHTML="Font Size";for(var s=0;s<r;s+=1)(u=i.appendChild(document.createElement("th"))).innerHTML=o,o+=100;return Object.keys(this).forEach(e=>{var t=n.insertRow(),r=this[e];(u=t.insertCell()).innerHTML=e;for(var i=0;i<r.length;i+=1){var o,s=Number(this[e][i]),l=s<=Math.abs(a)?"strong":"span";(o=(u=t.insertCell()).appendChild(document.createElement(l))).setAttribute("data-compare",`${s} <= ${Math.abs(a)}`),o.innerHTML=this[e][i]||"âŠ˜"}}),e}});var s={normal:{background:.38,foreground:.43,lowThreshold:.035991,lowFactor:27.7847239587675,lowOffset:.027},reverse:{background:.5,foreground:.43,lowThreshold:.035991,lowFactor:27.7847239587675,lowOffset:.027}},l=3;function h(e){return e>o.threshold?e:e+Math.pow(o.threshold-e,o.exponent)}function f(){var e,t=n.luminance/100,i=r.luminance/100,u=!(t>i),o=s.normal;return i=u?i:h(i),t=u?h(t):t,o=u?s.reverse:s.normal,e=1.14*(Math.pow(t,o.background)-Math.pow(i,o.foreground)),(100*(u?e>-.001?0:e>-o.lowThreshold?e-e*o.lowFactor*o.lowOffset:e+o.lowOffset:e<.001?0:e<o.lowThreshold?e-e*o.lowFactor*o.lowOffset:e-o.lowOffset)).toFixed(l)}return Object.defineProperty(this,"Darkness",{enumerable:!0,value:o}),Object.defineProperty(this,"background",{enumerable:!0,get:function(){return n},set:i}),Object.defineProperty(this,"Fonts",{enumerable:!0,value:a}),Object.defineProperty(this,"foreground",{enumerable:!0,get:function(){return r},set:u}),Object.defineProperty(this,"precision",{enumerable:!0,value:l}),Object.defineProperty(this,"PowerCurve",{enumerable:!0,value:s}),Object.defineProperty(this,"score",{enumerable:!1,value:f}),e&&e.background?i(e.background):i(t),e&&e.foreground?u(e.foreground):u(e),this}
