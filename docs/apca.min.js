function Color(e){function t(e){return N.hex.map(function(t){var r=t.exec(""+e.trim());if(r)return{red:Math.min(255,Math.max(0,f((r[1]+r[1]).substr(-2)))),green:Math.min(255,Math.max(0,f((r[2]+r[2]).substr(-2)))),blue:Math.min(255,Math.max(0,f((r[3]+r[3]).substr(-2)))),opacity:r[4]?Math.min(1,Math.max(0,f((r[4]+r[4]).substr(-2))/255)):1}}).reduce(function(e,t){return e||t})}function r(e){var t,r,n,u,i;return a(e)&&(e=function(e){return N.hsl.map(function(t){var r=t.exec(e);if(r)return{hue:Number(r[1]),saturation:c(r[2]),lightness:c(r[3]),opacity:r[4]?Number(r[4]):1}}).reduce(function(e,t){return e||t})}(e)),0===e.saturation?{red:255*e.lightness,green:255*e.lightness,blue:255*e.lightness,opacity:e.opacity}:"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness?(t=(1-Math.abs(2*e.lightness-1))*e.saturation,r=e.hue/60,n=t*(1-Math.abs(r%2-1)),u=e.lightness-t/2,i=[[t,n,0],[n,t,0],[0,t,n],[0,n,t],[n,0,t],[t,0,n]][Math.floor(r)%6],{red:Math.round(255*(i[0]+u)),green:Math.round(255*(i[1]+u)),blue:Math.round(255*(i[2]+u)),opacity:e.opacity}):void 0}function n(e){return N.rgb.map(function(t){var r=t.exec(e);if(r)return{red:Number(r[1]),green:Number(r[2]),blue:Number(r[3]),opacity:r[4]?Number(r[4]):1}}).reduce(function(e,t){return e||t})}function u(e){var t,r,u,i,a,o,f,c=60;if(s(e)&&(e=n(e)),l(e.red)&&l(e.green)&&l(e.blue))return t=h(e.red/255),r=h(e.green/255),u=h(e.blue/255),o=((i=Math.max(t,r,u))+(a=Math.min(t,r,u)))/2,f=i===a?0:o<.5?(i-a)/(i+a):(i-a)/(2-i-a||1),c*=t===i?(r-u)/(i-a||1):r===i?2+(u-t)/(i-a||1):4+(t-r)/(i-a||1),c+=c<0?360:0,{hue:Math.round(c),saturation:Math.round(100*f)/100,lightness:Math.round(100*o)/100,opacity:e.opacity}}function i(e){return a(e)||e&&l(e.hue)&&l(e.saturation)&&l(e.lightness)}function a(e){return N.hsl.map(function(t){return t.test(e)}).filter(function(e){return e}).length>0}function o(e){return e&&l(e.red)&&l(e.green)&&l(e.blue)}function s(e){return N.rgb.map(function(t){return t.test(e)}).filter(function(e){return e}).length>0}function l(e){return!Number.isNaN(e)&&void 0!==e}function f(e){return parseInt(e,16)}function h(e){return Number(e.toFixed(2))}function c(e){if("string"==typeof e||"number"==typeof e)return/%$/.test(e)?parseFloat(e.replace(/%$/,""))/100:/^[0a-f]+$/i.test(e)?parseInt(e,16):parseFloat(e)}Object.defineProperty(this,"blue",{enumerable:!0,get:function(){return p},set:function(e){p="string"==typeof e&&/[a-f]/i.test(e)?c(e):Number(e);var t=u({red:b,green:d,blue:p});t&&(g=t.hue,m=t.saturation,y=t.lightness)},writeable:!0}),Object.defineProperty(this,"canDarken",{enumerable:!0,get:function(){return this.luminance>0}}),Object.defineProperty(this,"canLighten",{enumerable:!0,get:function(){return this.luminance<100}}),Object.defineProperty(this,"green",{enumerable:!0,get:function(){return d},set:function(e){d="string"==typeof e&&/[a-f]/i.test(e)?c(e):Number(e);var t=u({red:b,green:d,blue:p});t&&(g=t.hue,m=t.saturation,y=t.lightness)},writeable:!0}),Object.defineProperty(this,"hcolor",{enumerable:!0,get:function(){function e(e){return`0${e.toString(16)}`.substr(-2)}if(l(this.red)&&l(this.green)&&l(this.blue))return this.opacity<1?`#${e(this.red)}${e(this.green)}${e(this.blue)}${e(Math.floor(255*this.opacity))}`:`#${e(this.red)}${e(this.green)}${e(this.blue)}`},set:function(e){var r=t(e),n=u(r);l(r.red)&&l(r.green)&&l(r.blue)&&(b=r.red,d=r.green,p=r.blue,M=r.opacity);l(n.hue)&&l(n.saturation)&&l(n.lightness)&&(g=n.hue,m=n.saturation,y=n.lightness)},writeable:!0}),Object.defineProperty(this,"hue",{enumerable:!0,get:function(){return g},set:function(e){g=Number(e),g+=g<360?360:0;var t=r({hue:g%=360,saturation:m,lightness:y,opacity:M});t&&(b=t.red,d=t.green,p=t.blue)},writeable:!0}),Object.defineProperty(this,"lightness",{enumerable:!0,get:function(){if("number"==typeof y)return`${Math.round(100*y)}%`},set:function(e){y="string"==typeof e?c(e):Number(e);var t=r({hue:g,saturation:m,lightness:y,opacity:M});t&&(b=t.red,d=t.green,p=t.blue)},writeable:!0}),Object.defineProperty(this,"LINEAR_MODIFIER",{enumarable:!0,get:function(){return j},set:function(e){l(e.red)&&l(e.green)&&l(e.blue)&&(j=e)},writeable:!0}),Object.defineProperty(this,"luminance",{enumerable:!0,get:function(){function e(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}if(l(b)&&l(d)&&l(p))return 100*(j.red*e(b)+j.green*e(d)+j.blue*e(p))}}),Object.defineProperty(this,"opacity",{enumerable:!0,get:function(){return"number"!=typeof M?1:h(M)},set:function(e){var t;t="string"==typeof e&&/%/.test(e)?Number(e.replace(/%/g,""))/100:"string"==typeof e&&/^0|[a-f]/i.test(e)?parseInt(e,16)/255:Number(e);Number.isNaN(t)||(M=h(Math.floor(t)>0?t/100:t))},writeable:!0}),Object.defineProperty(this,"red",{enumerable:!0,get:function(){return b},set:function(e){b="string"==typeof e&&/[a-f]/i.test(e)?c(e):Number(e);var t=u({red:b,green:d,blue:p});t&&(g=t.hue,m=t.saturation,y=t.lightness)},writeable:!0}),Object.defineProperty(this,"saturation",{enumerable:!0,get:function(){if("number"==typeof m)return`${Math.round(100*m)}%`},set:function(e){m="string"==typeof e?c(e):Number(e);var t=r({hue:g,saturation:m,lightness:y,opacity:M});t&&(b=t.red,d=t.green,p=t.blue)},writeable:!0}),this.darken=function(e){var r=this.toString()||"#000000",n=parseInt(r.replace(/^#/,""),16),u=Math.max(0,(n>>16)-(e||1)),i=(Math.max(0,(255&n)-(e||1))|Math.max(0,(n>>8&255)-(e||1))<<8|u<<16).toString(16),a=t(`000000${i}`.substr(-6)),o=convertRgbTohsl(a);return a&&(b=a.red,d=a.green,p=a.blue),o&&(i=o.hue,m=o.saturation,y=o.lightness),this},this.lighten=function(e){var r=this.toString()||"#ffffff",n=parseInt(r.replace(/^#/,""),16),i=Math.min((n>>16)+(e||1),255),a=(Math.min((255&n)+(e||1),255)|Math.min((n>>8&255)+(e||1),255)<<8|i<<16).toString(16),o=t(`000000${a}`.substr(-6)),s=u(o);return o&&(b=o.red,d=o.green,p=o.blue),s&&(a=s.hue,m=s.saturation,y=s.lightness),this},this.isColorType=function(e){return"string"==typeof e?Object.keys(N).map(function(t){return N[t].map(function(t){return t.test(e)}).filter(function(e){return e}).length>0}).filter(function(e){return e}).length>0:i(e)||o(e)},this.toString=function(){return this.hcolor};var b,d,p,g,m,y,M,v,x,O,w,j={red:.2126,green:.7152,blue:.0722},N={hex:[/^#([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})$/i,/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,/^#([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})?$/i,/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i],rgb:[/^rgb\((\d+)\W+(\d+)\W+(\d+)\);?$/i,/^rgba\((\d+)\W+(\d+)\W+(\d+)\W*(\d?\.\d+)?\);?$/i],hsl:[/^hsl\((\d+)\W+(\d+%)\W+(\d+%)\);?$/i,/^hsla?\((\d+)\W+(\d+%)\W+(\d+%)\W*(\d?\.\d+)?\);?$/i]};O=o(x=v=e)?x:s(x)?n(x):i(x)?r(x):t(x),w=u(O),O&&(b=O.red,d=O.green,p=O.blue),w&&(g=parseInt(w.hue,10),g+=g<0?360:0,m=c(w.saturation),y=c(w.lightness)),M=O.opacity||c(v.opacity)}function APCA(e,t){var r,n;function u(e){var t=new Color(e);r=t.isColorType(e)?t:r,f()}function i(e){var t=new Color(e);n=t.isColorType(e)?t:n,f()}var a={threshold:.01,exponent:1.5},o={"12px":[null,null,null,100,94,87,80,80,80],"14px":[null,null,null,90,84,77,70,70,70],"16px":[null,null,110,80,77,72,60,60,60],"18px":[null,null,100,78,74,70,59,59,59],"20px":[null,120,94,76,72,67,58,58,58],"22px":[null,110,87,75,70,65,57,57,57],"24px":[null,100,80,74,66,60,56,56,56],"26px":[null,96,78,72,65,59,55,55,55],"28px":[null,92,76,70,64,58,54,54,52],"30px":[null,88,74,68,62,57,53,52,50],"32px":[null,84,72,66,60,56,52,50,48],"36px":[120,80,70,64,58,54,50,48,46],"40px":[114,77,68,62,57,52,48,46,44],"44px":[108,74,66,60,55,50,46,44,42],"48px":[100,70,65,58,53,48,44,42,40],"56px":[95,67,64,56,51,46,42,40,40],"64px":[90,65,62,54,49,44,40,40,40],"72px":[85,63,60,52,47,42,40,40,40],"96px":[80,60,55,50,45,40,40,40,40]};Object.defineProperty(o,"list",{enumerable:!1,value:function(){return Object.keys(this)}}),Object.defineProperty(o,"toHtml",{enumerable:!1,value:function(){var e=document.createElement("table"),t=document.createElement("thead"),r=document.createElement("tbody"),n=Object.keys(this).reduce((e,t)=>Math.max(e,this[t].length),0),u=t.insertRow(),i=u.appendChild(document.createElement("th")),a=100,o=c();e.appendChild(t),e.appendChild(r),i.innerHTML="Font Size";for(var s=0;s<n;s+=1)(i=u.appendChild(document.createElement("th"))).innerHTML=a,a+=100;return Object.keys(this).forEach(e=>{var t=r.insertRow(),n=this[e];(i=t.insertCell()).innerHTML=e;for(var u=0;u<n.length;u+=1){var a,s=Number(this[e][u]),l=s<=Math.abs(o)?"strong":"span";(a=(i=t.insertCell()).appendChild(document.createElement(l))).setAttribute("data-compare",`${s} <= ${Math.abs(o)}`),a.innerHTML=this[e][u]||"âŠ˜"}}),e}});var s={normal:{background:.38,foreground:.43,lowThreshold:.035991,lowFactor:27.7847239587675,lowOffset:.027},reverse:{background:.5,foreground:.43,lowThreshold:.035991,lowFactor:27.7847239587675,lowOffset:.027}},l=3;function f(){if(r&&n&&n.opacity<1){var e=r,t=n,u=t.opacity;i(["red","green","blue"].reduce(function(r,n){return r[n]=Math.round(u*t[n]+(1-u)*e[n]),r},{opacity:1}))}}function h(e){return e>a.threshold?e:e+Math.pow(a.threshold-e,a.exponent)}function c(){var e,t=r.luminance/100,u=n.luminance/100,i=!(t>u),a=s.normal;return u=i?u:h(u),t=i?h(t):t,a=i?s.reverse:s.normal,e=1.14*(Math.pow(t,a.background)-Math.pow(u,a.foreground)),(100*(i?e>-.001?0:e>-a.lowThreshold?e-e*a.lowFactor*a.lowOffset:e+a.lowOffset:e<.001?0:e<a.lowThreshold?e-e*a.lowFactor*a.lowOffset:e-a.lowOffset)).toFixed(l)}return Object.defineProperty(this,"Darkness",{enumerable:!0,value:a}),Object.defineProperty(this,"background",{enumerable:!0,get:function(){return r},set:u}),Object.defineProperty(this,"Fonts",{enumerable:!0,value:o}),Object.defineProperty(this,"foreground",{enumerable:!0,get:function(){return n},set:i}),Object.defineProperty(this,"precision",{enumerable:!0,value:l}),Object.defineProperty(this,"PowerCurve",{enumerable:!0,value:s}),Object.defineProperty(this,"score",{enumerable:!1,value:c}),e&&e.background?u(e.background):u(t),e&&e.foreground?i(e.foreground):i(e),r.LINEAR_MODIFIER={red:.2126729,green:.7151522,blue:.072175},n.LINEAR_MODIFIER={red:.2126729,green:.7151522,blue:.072175},this}
