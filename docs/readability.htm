<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <title>Roking A11y Readability Evaluator</title>
    <link href="readability.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <main>
      <h1>Readability evaluation using the L채sbarhetsindex</h1>
      <p>
        The Readability utility calculates the L채sbarhetsindex for content.
      </p>
      <blockquote>
        The previous version of the `Readability` object did not account for phrases that
        are not complete sentences, so some measure of caution was advised. For example,
        the phrase "Last Name" would have a L채sbarhetsindex score of 2, but the the phrase
        "Surname" would have a L채sbarhetsindex score of 101, even though its complexity would
        not ordinarily be considered that much greater. To address this, a sample
        must have at least five words to be considered complete.
      </blockquote>
      <p>
        Enter or paste the text to evaluate in the form below.
      </p>
      <p>
        <label for="textin">Text to evaluate</label>
        <textarea id="textin"></textarea>
        <span class="score">
          <span id="score-label">Score</span>: 
          <span aria-labelledby="score-label" id="lix" role="status"></span>
          <span aria-labelledby="score-label" id="ovix" role="status"></span>
        </span>
      </p>
      <p>
        <label for="lang">Language</label>
        <select id="lang"><option value="en">English</option></select>
      </p>
      <p>
        <button type="button" onclick="calc();">Evaluate</button>
      </p>
    </main>
    <script src="readability.js"></script>
    <script>
      var lang = document.getElementById('lang');
      (new Readability()).languages.forEach(el => {
        const opt = document.createElement('option');
        opt.value = el.code;
        opt.text = el.name;
        lang.add(opt);
      });

      function calc () {
        var content = document.getElementById('textin').value,
          language = lang.options[lang.selectedIndex].value,
          evaluator = new Readability(),
          lix = document.getElementById('lix'),
          ovix = document.getElementById('ovix');

        if (evaluator) {
          evaluator.lang = language;
          evaluator.score(content);
          lix.innerHTML = evaluator.error ? evaluator.error.message : evaluator.LIX;
          ovix.innerHTML = evaluator.error ? evaluator.error.message : evaluator.OVIX;
          console.log('LIX: '+evaluator.LIX+'\nOVIX: '+evaluator.OVIX);
        }
      }
    </script>
  </body>
</html>

